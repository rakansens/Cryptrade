# Type Inventory - Market Domain Types

## Current Status (Pre-Unification)

### üîç Duplicate Type Definitions Found

#### 1. **PriceData** (3 definitions)
- `lib/schemas/binance.schema.ts:106-113` - Full OHLCV: `time, open, high, low, close, volume`
- `lib/indicators/moving-average.ts:8-11` - Minimal: `time, close` 
- `lib/indicators/bollinger-bands.ts:10-13` - Minimal: `time, close`

#### 2. **MACDData** (2 definitions)
- `lib/schemas/binance.schema.ts:130-135` - with z.infer: `time, macd, signal, histogram`
- `lib/indicators/macd.ts:9-14` - standalone interface: `time, macd, signal, histogram`

#### 3. **RSIData** (2 definitions)
- `lib/schemas/binance.schema.ts:125-128` - with z.infer + validation: `time, rsi`
- `lib/indicators/rsi.ts:8-11` - standalone interface: `time, rsi`

#### 4. **MovingAverageData** (1 definition, needs consolidation)
- `lib/indicators/moving-average.ts:3-6` - `time: UTCTimestamp, value: number`

#### 5. **BollingerBandsData** (1 definition, needs consolidation) 
- `lib/indicators/bollinger-bands.ts:3-8` - `time: UTCTimestamp, upper, middle, lower`

### üìã Single-Source Types (From binance.schema.ts)

**Core Binance Types:**
- ProcessedKline ‚úÖ 
- BinanceTicker24hr ‚úÖ
- BinanceTradeMessage ‚úÖ
- BinanceKlineMessage ‚úÖ
- PriceUpdate ‚úÖ
- IndicatorOptions ‚úÖ
- MarketTicker ‚úÖ

**Zod Schemas (with validation):**
- ProcessedKlineSchema
- BinanceTicker24hrSchema
- PriceDataSchema
- RSIDataSchema
- MACDDataSchema
- etc.

### üéØ Target Consolidation Plan

**New Single Source:** `/types/market.ts`

**12 Core Types to Migrate:**
1. PriceData (use full OHLCV version)
2. ProcessedKline
3. MovingAverageData
4. RSIData
5. MACDData
6. BollingerBandsData  
7. BinanceTicker24hr
8. BinanceTradeMessage
9. BinanceKlineMessage
10. PriceUpdate
11. IndicatorOptions
12. MarketTicker

### üîß Import Dependencies to Clean Up

**Files importing from `@/lib/schemas/`:**
- `types/index.ts:13` 
- `store/market.store.ts:2,4`
- `components/chart/hooks/useIndicatorChartData.ts`
- `components/chart/hooks/useChartData.ts`
- `lib/schemas/__tests__/binance.schema.test.ts`
- `lib/binance/api-service.ts`

**Files with indicator type conflicts:**
- All `/lib/indicators/*.ts` files define their own types
- All `/components/chart/hooks/useIndicator*.ts` import mixed sources

### ‚ö° Migration Steps
1. Create `/types/market.ts` with Zod schemas + z.infer<> types
2. Move all 12 domain types + schemas to single file  
3. Update imports across codebase (codemod)
4. Delete old schema files
5. Verify tests pass & no circular dependencies

### üö´ Files to Remove After Migration
- `lib/schemas/binance.schema.ts` (move content to market.ts)
- Duplicate type definitions in `/lib/indicators/*.ts` files (keep functions only)

---
**Generated by:** Task 4-1 Type Inventory  
**Target:** /types/market.ts as Single Source of Truth